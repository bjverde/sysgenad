function tdialog_start(e,t){$.fn.modal.Constructor.prototype.enforceFocus=function(){};$(e).modal({backdrop:true,keyboard:true});if(typeof t!="undefined"){$(e).on("hidden.bs.modal",function(){t();tdialog_close(e.substring(1))})}else{$(e).on("hidden.bs.modal",function(){tdialog_close(e.substring(1))})}}function tdialog_close(e){$(".modal-backdrop").last().remove();$("#"+e).modal("hide");$("body").removeClass("modal-open");setTimeout(function(){$("#"+e).remove()},300)}function tjquerydialog_start(e,t,n,a,i,r,o,s,l,c,d,f,u){$(e).dialog({modal:t,stack:false,zIndex:2e3,draggable:n,resizable:a,closeOnEscape:f,height:r,width:i,dialogClass:u,beforeClose:function(){if(typeof d=="function"){d();return false}return true},close:function(e,t){$(this).remove();$(".tooltip.fade").remove()},buttons:c});$(".ui-dialog").last().focus();$(e).closest(".ui-dialog").css({zIndex:l});$(".ui-widget-overlay").css({zIndex:100});if(o>0){$(e).closest(".ui-dialog").css({top:o+"px"})}if(s>0){$(e).closest(".ui-dialog").css({left:s+"px"})}}function tjquerydialog_block_ui(){$(document).ready(function(){$(".ui-dialog").css("pointer-events","none");$(".ui-dialog-content").css("opacity","0.5")})}function tjquerydialog_unblock_ui(){$(".ui-dialog").css("pointer-events","all");$(".ui-dialog-content").css("opacity","")}function tform_send_data(a,e,t,i,n){if(parseInt(n)>0){setTimeout(function(){tform_send_data(a,e,t,i,0)},n);return}try{if(e.substr(0,1)=="#"){var r=$(e);var o=[]}else{var r=$("form[name="+a+"] [name='"+e+"']");var o=$("form[name="+a+"] [name='"+e+"[]']")}if(r.length||o.length){if(typeof Adianti.formEventsCounter=="undefined"||Number.isNaN(Adianti.formEventsCounter)){Adianti.formEventsCounter=0}if(Adianti.formEventsCounter==0){if(r.length){if(r.attr("widget")=="thtmleditor"){r.summernote("code",t)}if(r.attr("widget")=="tcolor"){r.colorpicker("setValue",t)}else if(r.attr("role")=="tcombosearch"){if(r.val()!==t){var s=function(e){if(/<[a-z][\s\S]*>/i.test(e.text)){return $("<span>"+e.text+"</span>")}else{return e.text}};r.select2({templateResult:s,templateSelection:s}).val(t).trigger("change.select2")}}else if(r.attr("widget")=="tdbuniquesearch"){var l=i;tdbuniquesearch_set_value(a,e,t,function(){if(l){if(r.attr("exitaction")){tform_events_hang_exec(r.attr("exitaction"))}if(r.attr("changeaction")){tform_events_hang_exec(r.attr("changeaction"))}}});i=false}else if(r.attr("component")=="multisearch"){if(t){var s=function(e){if(/<[a-z][\s\S]*>/i.test(e.text)){return $("<span>"+e.text+"</span>")}else{return e.text}};r.select2({templateResult:s,templateSelection:s}).val(t).trigger("change.select2")}}else if(r.attr("type")=="radio"||r.attr("type")=="checkbox"){if(t){var c=r.filter("[value="+t+"]").prop("checked",true);if(c.parent().prop("tagName")=="LABEL"){c.parent().parent().find("label").removeClass("active");c.parent().toggleClass("active")}}}else{r.val(t)}if(i){if(r.attr("exitaction")){tform_events_hang_exec(r.attr("exitaction"))}if(r.attr("changeaction")){tform_events_hang_exec(r.attr("changeaction"))}}}else if(o.length){if(o.attr("type")=="checkbox"){o.prop("checked",false);if(t){o.parent().parent().find("label").removeClass("active");var d=t.split("|");$.each(d,function(e,t){var n=o.filter("[value="+t+"]").prop("checked",true);if(n.parent().prop("tagName")=="LABEL"){n.parent().toggleClass("active")}})}}else if(o.attr("component")=="multientry"){if(t){o.empty();var f=t.split("|");$.each(f,function(e,t){o.append($("<option/>").val(t).text(t))});o.val(f).trigger("change.select2")}}else if(o.attr("component")=="multisearch"&&o.attr("widget")!=="tuniquesearch"){if(t){var f=t.split("|");var s=function(e){if(/<[a-z][\s\S]*>/i.test(e.text)){return $("<span>"+e.text+"</span>")}else{return e.text}};if(o.attr("widget")=="tmultisearch"||o.attr("widget")=="tdbmultisearch"){o.select2({templateResult:s,templateSelection:s}).val(f).trigger("change.select2")}else{$.each(f,function(e,t){var n=$($(o)[e]).attr("id");tform_send_data(a,"#"+n,t,i)});i=false}}}else if(o.length){if(t){var f=t.split("|");$(o).find("option").prop("selected",false);if(o.attr("widget")=="tselect"&&o.length==1){$.each(f,function(e,t){$(o).find("option").filter('[value="'+t+'"]').prop("selected",true)})}else{$.each(f,function(e,t){var n=$($(o)[e]).attr("id");tform_send_data(a,"#"+n,t,i)});i=false}}}if(i){if(o.attr("exitaction")){tform_events_hang_exec(o.attr("exitaction"))}if(o.attr("changeaction")){tform_events_hang_exec(o.attr("changeaction"))}}}}else{tform_events_queue_push(function(){tform_send_data(a,e,t,i)})}}}catch(e){console.log(e)}}function tform_send_data_by_id(e,t,n,a,i){if(parseInt(i)>0){setTimeout(function(){tform_send_data_by_id(e,t,n,a,0)},i);return}try{if($("form[name="+e+"] [id="+t+"]").length){if(typeof Adianti.formEventsCounter=="undefined"||Number.isNaN(Adianti.formEventsCounter)){Adianti.formEventsCounter=0}if(Adianti.formEventsCounter==0){$("form[name="+e+"] [id="+t+"]").val(n);if(a){if($("form[name="+e+"] [id="+t+"]").attr("exitaction")){tform_events_hang_exec($("form[name="+e+"] [id="+t+"]").attr("exitaction"))}if($("form[name="+e+"] [id="+t+"]").attr("changeaction")){tform_events_hang_exec($("form[name="+e+"] [id="+t+"]").attr("changeaction"))}}}else{tform_events_queue_push(function(){tform_send_data_by_id(e,t,n,a)})}}}catch(e){console.log(e)}}function tform_events_hang_exec(e){if(typeof Adianti.formEventsCounter=="undefined"||Number.isNaN(Adianti.formEventsCounter)){Adianti.formEventsCounter=0}Adianti.formEventsCounter++;e=e.replace("'callback'","tform_decrease_events_counter");Function(e)()}function tform_events_stop(e){Adianti.formEventsStop=e}function tform_events_queue_push(e){if(typeof Adianti.formEventsQueue=="undefined"){Adianti.formEventsQueue=new Array}Adianti.formEventsQueue.push(e);setTimeout(tform_process_events_queue,100)}function tform_process_events_queue(){if(typeof Adianti.formEventsCounter=="undefined"||Number.isNaN(Adianti.formEventsCounter)){Adianti.formEventsCounter=0}if(Adianti.formEventsCounter==0&&Adianti.formEventsQueue.length>0){next=Adianti.formEventsQueue.shift();next()}if(Adianti.formEventsQueue.length>0){setTimeout(tform_process_events_queue,100)}else{if(typeof Adianti.formEventsStop=="function"){Adianti.formEventsStop();Adianti.formEventsStop=null}}}function tform_decrease_events_counter(){if(typeof Adianti.formEventsCounter=="undefined"||Number.isNaN(Adianti.formEventsCounter)){Adianti.formEventsCounter=0}Adianti.formEventsCounter--}function tform_send_data_aggregate(e,t,n,a){try{if($("form[name="+e+"] [name="+t+"]").val()==""){$("form[name="+e+"] [name="+t+"]").val(n)}else{current_value=$("form[name="+e+"] [name="+t+"]").val();$("form[name="+e+"] [name="+t+"]").val(current_value+", "+n)}}catch(e){console.log(e)}}function tform_fire_field_actions(e,t){if($("form[name="+e+"] [name="+t+"]").attr("exitaction")){tform_events_hang_exec($("form[name="+e+"] [name="+t+"]").attr("exitaction"))}if($("form[name="+e+"] [name="+t+"]").attr("changeaction")){tform_events_hang_exec($("form[name="+e+"] [name="+t+"]").attr("changeaction"))}}function tform_hide_field(e,t,n){if(typeof n=="undefined"){$("#"+e+' [name="'+t+'"]').closest(".tformrow").hide("fast")}else{$("#"+e+' [name="'+t+'"]').closest(".tformrow").hide(n)}}function tform_show_field(e,t,n){if(typeof n=="undefined"){$("#"+e+' [name="'+t+'"]').closest(".tformrow").show("fast")}else{$("#"+e+' [name="'+t+'"]').closest(".tformrow").show(n)}}function ttable_clone_previous_row(e){var t=$(e).closest("table");var n=t.find("tbody tr:last");var a=n.clone();tfieldlist_reset_fields(a,true);t.find("tbody").append(a);ttable_reset_counter(t)}function ttable_clone_row(e){var t=$(e).closest("tr");var n=$(e).closest("table");var a=t.prev();var i=t.clone();tfieldlist_reset_fields(i,false);t.after($(i));ttable_reset_counter(n)}function ttable_reset_counter(e){var a=0;var t=$(e).find("tr").each(function(e,t){var n=$(t).find("input,select");$(t).data("row",a);if(n.length>0){$.each(n,function(e,t){$(t).data("row",a)});a++}})}function ttable_remove_row(a){setTimeout(function(){var e=$(a).closest("table");var t=e.find("tbody").find("tr:visible").length;tr=$(a).closest("tr");if(t==1){var n=tr.clone();tfieldlist_reset_fields(n,true);tr.after($(n));tr.remove()}else{tr.remove()}ttable_reset_counter(e)},10)}function ttable_remove_row_by_id(e,t){$("#"+e).find("tr[id="+t+"]").remove()}function ttable_show_row(e,t){$("#"+e).find("tr#"+t).show()}function ttable_hide_row(e,t){$("#"+e).find("tr#"+t).hide()}function ttable_sortable_rows(e,t,n){$(document).ready(function(){$("#"+e+" tbody").sortable({handle:t,deactivate:n})})}function ttable_get_column_values(e,t){return $("#"+e+" tbody").find("tr").find("td:nth-child("+t+")").map(function(){return this.innerText}).get().join(",")}function ttable_add_row(e,t,n){$("#"+e+" tbody").append(base64_decode(n))}function ttable_replace_row_by_id(e,t,n){if($("#"+e+" tbody").find("#"+t).length>0){$("#"+e+" tbody").find("#"+t).replaceWith(base64_decode(n))}else{$("#"+e+" tbody").append(base64_decode(n))}}function tfieldlist_reset_fields(m,_){var h=parseInt(Math.random()*1e8);$(m).attr("id",h);var e=$(m).find("input,select");var v=[];$.each(e,function(e,t){var n=$(t).attr("id");var a=$(t).attr("widget");var i=$(t).attr("role");if(typeof n!=="undefined"){var r=n.split("_");r.pop();var o=r.join("_");var s=o+"_"+h;var l=$(t).parent();if(v.indexOf(s)>=0){var s=o+parseInt(Math.random()*100)+"_"+h}v.push(s);if(a=="tdate"||a=="ttime"||a=="tdatetime"){$(t).attr("id",s);if(_){$(t).val("")}if(typeof $(t).attr("exitaction")!=="undefined"){$(t).attr("exitaction",$(t).attr("exitaction").replace(n,s))}if(typeof $(t).attr("onblur")!=="undefined"){$(t).attr("onblur",$(t).attr("onblur").replace(n,s))}grandparent=$(l).parent();t=$(t).detach();$(l).remove();grandparent.append(t);var c=a;if(a=="ttime"){var c="tdatetime"}var d=new RegExp(n,"g");tfieldlist_execute_scripts(grandparent,c,function(e){e=e.replace(d,s);return e})}else if(a=="tentry"){$(t).attr("id",s);if(_){$(t).val("")}if(typeof $(t).attr("exitaction")!=="undefined"){$(t).attr("exitaction",$(t).attr("exitaction").replace(n,s))}if(typeof $(t).attr("onblur")!=="undefined"){$(t).attr("onblur",$(t).attr("onblur").replace(n,s))}var d=new RegExp(n,"g");tfieldlist_execute_scripts(l,"tentry",function(e){e=e.replace(d,s);return e})}else if(a=="tspinner"){$(t).attr("id",s);if(_){$(t).val("")}if(typeof $(t).attr("exitaction")!=="undefined"){$(t).attr("exitaction",$(t).attr("exitaction").replace(n,s))}if(typeof $(t).attr("onblur")!=="undefined"){$(t).attr("onblur",$(t).attr("onblur").replace(n,s))}grandparent=$(l).parent();t=$(t).detach();$(l).remove();grandparent.append(t);var d=new RegExp(n,"g");tfieldlist_execute_scripts(grandparent,"tspinner",function(e){e=e.replace(d,s);return e})}else if(a=="tcolor"){$(t).attr("id",s);if(_){$(t).val("")}if(typeof $(t).attr("exitaction")!=="undefined"){$(t).attr("exitaction",$(t).attr("exitaction").replace(n,s))}if(typeof $(t).attr("onblur")!=="undefined"){$(t).attr("onblur",$(t).attr("onblur").replace(n,s))}grandparent=$(l).parent();var d=new RegExp(n,"g");tfieldlist_execute_scripts(grandparent,"tcolor",function(e){e=e.replace(d,s);return e})}else if(a=="thidden"){$(t).attr("id",s);if($(t).attr("uniqid")=="true"){$(t).val(parseInt(Math.random()*1e10))}else if(_){$(t).val("")}var d=new RegExp(n,"g");tfieldlist_execute_scripts(l,"thidden",function(e){e=e.replace(d,s);return e})}else if(a=="tdbmultisearch"||a=="tdbuniquesearch"){$(t).attr("id",s);$(t).removeData("select2-id").removeAttr("data-select2-id").find("option").removeAttr("data-select2-id");$(m).removeData("select2-id").removeAttr("data-select2-id");$(l).find(".select2-container").remove();var d=new RegExp(n,"g");tfieldlist_execute_scripts(l,"tdbmultisearch",function(e){e=e.replace(d,s);return e});if(_){setTimeout(function(){$(t).val("").trigger("change.select2")},10)}}else if(a=="tmultisearch"||a=="tuniquesearch"){$(t).attr("id",s);$(t).removeData("select2-id").removeAttr("data-select2-id").find("option").removeAttr("data-select2-id");$(m).removeData("select2-id").removeAttr("data-select2-id");$(l).find(".select2-container").remove();var d=new RegExp(n,"g");tfieldlist_execute_scripts(l,"tmultisearch",function(e){e=e.replace(d,s);return e});if(_){setTimeout(function(){$(t).val("").trigger("change.select2")},10)}}else if(a=="tcombo"){$(t).attr("id",s);if(_){$(t).val("")}if(i=="tcombosearch"){$(t).removeData("select2-id").removeAttr("data-select2-id").find("option").removeAttr("data-select2-id");$(m).removeData("select2-id").removeAttr("data-select2-id");$(l).find(".select2-container").remove()}if(typeof $(t).attr("changeaction")!=="undefined"){$(t).attr("changeaction",$(t).attr("changeaction").replace(n,s))}if(typeof $(t).attr("onchange")!=="undefined"){$(t).attr("onchange",$(t).attr("onchange").replace(n,s))}var d=new RegExp(n,"g");tfieldlist_execute_scripts(l,"tcombo",function(e){e=e.replace(d,s);return e})}else if(a=="tfile"){$(t).attr("id",s);if(_){$(t).val("")}var l=$(t).closest("td");var f=l.find(".div_file").attr("id");var u="div_file_"+h;l.find(".tfile_row_wrapper").remove();l.find(".file-response-icon").remove();l.find(".div_file").attr("id",u);$(t).css("padding-left","5px");if(typeof $(t).attr("changeaction")!=="undefined"){$(t).attr("changeaction",$(t).attr("changeaction").replace(n,s))}if(typeof $(t).attr("onchange")!=="undefined"){$(t).attr("onchange",$(t).attr("onchange").replace(n,s))}var d=new RegExp(n,"g");var p=new RegExp(f,"g");tfieldlist_execute_scripts(l,"tfile",function(e){e=e.replace(d,s);e=e.replace(p,u);return e})}}if(a=="tradiobutton"){$(t).parent().removeClass("active")}else if(a=="tcheckbutton"){$(t).parent().removeClass("active")}})}function tfieldlist_execute_scripts(e,a,i){var t=$(e).find("script");$.each(t,function(e,t){var n=$(t).text();n=i(n);if(n.trim().split("_")[0]==a){$(t).text(n);setTimeout(function(){new Function(n)()},10)}})}function tfieldlist_clear(e){ttable_clone_previous_row($("[name="+e+"] tbody"));var n=$("[name="+e+"] tbody").find("tr").length-1;$("[name="+e+"] tbody").find("tr").each(function(e,t){if(e<n){ttable_remove_row(t)}});$("[name="+e+"] tfoot").find('input[type="text"]').each(function(e,t){tfieldlist_update_sum($(t).attr("field_name"))})}function tfieldlist_add_rows(e,t){for(n=1;n<=t;n++){setTimeout(function(){ttable_clone_previous_row($("[name="+e+"] tbody"))},50*n)}}function tfieldlist_clear_rows(e,n,a){var t=$("[name="+e+"] tbody").find("tr").length;a=(a==0?t:a)+n;if(a>=t){ttable_clone_previous_row($("[name="+e+"] tbody").find("tr:last"));a=t}$("[name="+e+"] tbody").find("tr").each(function(e,t){if(e>=n&&e<a){$(t).remove()}})}function tfieldlist_get_last_row_data(e){var a={};a.index=$(e).closest("table").find("tbody tr:last").index();$(e).closest("table").find("tbody tr:last").find("[name]").each(function(e,t){var n=$(t).attr("name");n=n.replace("[]","");a[n]=$(t).val()});return a}function tfieldlist_get_row_data(e){var a={};a.index=$(e).closest("tr").index();a["_row_id"]=$(e).closest("tr").attr("id");$(e).closest("tr").find("[name]").each(function(e,t){var n=$(t).attr("name");n=n.replace("[]","");a[n]=$(t).val()});return a}function tfieldlist_column_sum(e){var a=0;$('[name="'+e+'[]"]').each(function(e,t){var n=tentry_get_data_by_id($(t).attr("id"));if(!isNaN(parseFloat(n))){a+=parseFloat(n)}});return a}function tfieldlist_update_sum(t,n){setTimeout(function(){var e=tfieldlist_column_sum(t);$("[name=grandtotal_"+t+"]").val(number_format(e,2,",","."));if(n&&typeof n==="function"){n()}},50)}function tdatagrid_inlineedit(n){$(function(){$(".inlineediting").editInPlace({callback:function(e,t){__adianti_load_page($(this).attr("action")+n+"&key="+$(this).attr("key")+"&"+$(this).attr("pkey")+"="+$(this).attr("key")+"&field="+$(this).attr("field")+"&value="+encodeURIComponent(t));return t},show_buttons:false,text_size:20,params:column=name})})}function tdatagrid_add_serialized_row(e,t){$("#"+e+" > tbody:last-child").append(t)}function tdatagrid_enable_groups(){$("[id^=tdatagrid_] tr[level]").not("[x=1]").css("cursor","pointer").attr("x","1").click(function(){if(!$(this).data("child-visible")){$(this).data("child-visible",false)}$(this).data("child-visible",!$(this).data("child-visible"));if($(this).data("child-visible")){$(this).siblings('[childof="'+$(this).attr("level")+'"]').hide("fast")}else{$(this).siblings('[childof="'+$(this).attr("level")+'"]').show("fast")}})}function tdatagrid_update_total(n){var l=n.substring(1);var e=document.querySelector(n);var t=new MutationObserver(function(e){e.forEach(function(e){if(e.target.tagName=="TBODY"){var t=$(n).find("[data-total-function=sum]");var s=0;t.each(function(e,t){var n=$(t).data("column-name");var a=$(t).data("total-mask");var i=a.split(":");if(i.length>0){var r=i[0];var o=i[1]}else{var r="";var o=a.substring(1)}$('[name="'+l+"_"+n+'[]"]').each(function(e,t){s+=parseFloat($(t).val())});$(t).html(r+" "+number_format(s,o.substring(0,1),o.substring(1,2),o.substring(2,3)));$(t).data("value",s);$(t).attr("data-value",s)})}})});var a={attributes:true,childList:true,characterData:true,subtree:true,attributeOldValue:true,characterDataOldValue:true};t.observe(e,a)}function tbutton_enable_field(e,t){setTimeout(function(){$("button[name="+t+"]").removeAttr("disabled");$("button[name=btn_"+t+"]").removeAttr("disabled");$("#tbutton_"+t).removeAttr("disabled")},1)}function tbutton_disable_field(e,t){setTimeout(function(){$("button[name="+t+"]").attr("disabled",true);$("button[name=btn_"+t+"]").attr("disabled",true);$("#tbutton_"+t).attr("disabled",true)},1)}function tcheckgroup_enable_field(e,t){setTimeout(function(){$("form[name="+e+"] [checkgroup="+t+"]").attr("onclick",null);$("form[name="+e+"] [checkgroup="+t+"]").css("pointer-events","auto");$("form[name="+e+"] [checkgroup="+t+"]").parent().css("pointer-events","auto");$("form[name="+e+"] [checkgroup="+t+"]").parent().removeAttr("disabled");$("form[name="+e+"] [checkgroup="+t+"]").parent().css("color","")},1)}function tcheckgroup_disable_field(e,t){setTimeout(function(){$("form[name="+e+"] [checkgroup="+t+"]").attr("onclick","return false");$("form[name="+e+"] [checkgroup="+t+"]").css("pointer-events","none");$("form[name="+e+"] [checkgroup="+t+"]").parent().css("pointer-events","none");$("form[name="+e+"] [checkgroup="+t+"]").parent().attr("disabled","");$("form[name="+e+"] [checkgroup="+t+"]").parent().css("color","gray")},1)}function tcheckgroup_clear_field(e,t){setTimeout(function(){$("form[name="+e+"] [checkgroup="+t+"]").prop("checked",false)},1)}function tcolor_enable_field(e,t){try{setTimeout(function(){$("form[name="+e+"] [name="+t+"]").closest(".color-div").colorpicker("enable");$("form[name="+e+"] [name="+t+"]").removeClass("tfield_disabled")},1)}catch(e){console.log(e)}}function tcolor_disable_field(e,t){try{setTimeout(function(){$("form[name="+e+"] [name="+t+"]").closest(".color-div").colorpicker("disable");$("form[name="+e+"] [name="+t+"]").addClass("tfield_disabled")},1)}catch(e){console.log(e)}}function tcolor_start(e,t,n){var a=0;if(typeof n!="undefined"){$("#"+e).closest(".color-div").colorpicker().on("changeColor",function(e){if(e.timeStamp-a>500){n(e.color);a=e.timeStamp}});$("#"+e).click(function(){$("#"+e).closest(".color-div").colorpicker("show")})}else{$("#"+e).closest(".color-div").colorpicker()}if(t!=="undefined"){$("#"+e).closest(".color-div").width(t)}$(".colorpicker").css("z-index",1e6)}function ticon_enable_field(e,t){try{setTimeout(function(){$("form[name="+e+'] div[name="block_'+t+'"]').remove()},1)}catch(e){console.log(e)}}function ticon_disable_field(e,t){try{input=$("form[name="+e+"] [name="+t+"]").closest(".input-group");setTimeout(function(){$("form[name="+e+'] div[name="block_'+t+'"]').remove()},19);setTimeout(function(){input.prepend('<div name="block_'+t+'" style="position:absolute; width:'+input.width()+"px; height:"+input.height()+'px; background: #c0c0c0; opacity:0.5;"></div>')},20)}catch(e){console.log(e)}}function ticon_start(e,t){if(t){$("#"+e).iconpicker().on("iconpickerUpdated",function(e){t($(this).val())})}else{$("#"+e).iconpicker()}}function tcombo_enable_field(e,t){if(typeof e!="undefined"&&e!=""){form_name_sel='form[name="'+e+'"] '}else{form_name_sel=""}var n='[name="'+t+'"]';if(t.indexOf("[")==-1&&$("#"+t).length>0){var n="#"+t}try{if($(form_name_sel+n).attr("role")=="tcombosearch"){tmultisearch_enable_field(e,t)}else{$(form_name_sel+n).attr("onclick",null);$(form_name_sel+n).css("pointer-events","auto");$(form_name_sel+n).removeClass("tcombo_disabled")}}catch(e){console.log(e)}}function tcombo_disable_field(e,t){if(typeof e!="undefined"&&e!=""){form_name_sel='form[name="'+e+'"] '}else{form_name_sel=""}var n='[name="'+t+'"]';if(t.indexOf("[")==-1&&$("#"+t).length>0){var n="#"+t}try{if($(form_name_sel+n).attr("role")=="tcombosearch"){tmultisearch_disable_field(e,t)}else{$(form_name_sel+n).attr("onclick","return false");$(form_name_sel+n).attr("tabindex","-1");$(form_name_sel+n).css("pointer-events","none");$(form_name_sel+n).addClass("tcombo_disabled")}}catch(e){console.log(e)}}function tcombo_add_option(e,t,n,a){var n=n.replace(/"/g,"");if(typeof e!="undefined"&&e!=""){e='form[name="'+e+'"] '}else{e=""}var i='select[name="'+t+'"]';if(t.indexOf("[")==-1&&$("#"+t).length>0){var i="#"+t}var r=$(e+i).find("optgroup");if(r.length>0){$('<option value="'+n+'">'+a+"</option>").appendTo(r.last())}else{$('<option value="'+n+'">'+a+"</option>").appendTo(e+i)}}function tcombo_create_opt_group(e,t,n){if(typeof e!="undefined"&&e!=""){e='form[name="'+e+'"] '}else{e=""}var a='[name="'+t+'"]';if(t.indexOf("[")==-1&&$("#"+t).length>0){var a="#"+t}$('<optgroup label="'+n+'"></optgroup>').appendTo(e+a)}function tcombo_clear(e,t,n){if(typeof n=="undefined"){n=true}if(typeof e!="undefined"&&e!=""){var e='form[name="'+e+'"] '}else{var e=""}var a='[name="'+t+'"]';if(t.indexOf("[")==-1&&$("#"+t).length>0){var a="#"+t}var t=$(e+a);if(t.attr("role")=="tcombosearch"){if(t.find("option:not(:disabled)").length>0){t.val("").empty().trigger("change.select2")}}else{t.val(false);t.html("")}if(n){if(t.attr("changeaction")){tform_events_hang_exec(t.attr("changeaction"))}}}function tcombo_enable_search(t,e){$(t).removeAttr("onchange");$(t).select2({allowClear:true,placeholder:e,templateResult:function(e){if(/<[a-z][\s\S]*>/i.test(e.text)){return $("<span>"+e.text+"</span>")}else{return e.text}},templateSelection:function(e){if(/<[a-z][\s\S]*>/i.test(e.text)){return $("<span>"+e.text+"</span>")}else{return e.text}}}).on("change",function(e){new Function($(t).attr("changeaction"))()})}function tdate_enable_field(e,t){try{$("form[name="+e+"] [name="+t+"]").removeClass("tfield_disabled");$("form[name="+e+"] [name="+t+"]").css("pointer-events","auto");$("form[name="+e+"] [name="+t+"]").removeAttr("tabindex");$("form[name="+e+"] [name="+t+"]").attr("readonly",false)}catch(e){console.log(e)}setTimeout(function(){$("form[name="+e+"] [name="+t+"]").next().show()},1)}function tdate_disable_field(e,t){try{$("form[name="+e+"] [name="+t+"]").addClass("tfield_disabled");$("form[name="+e+"] [name="+t+"]").css("pointer-events","none");$("form[name="+e+"] [name="+t+"]").attr("tabindex","-1");$("form[name="+e+"] [name="+t+"]").attr("readonly",true)}catch(e){console.log(e)}setTimeout(function(){$("form[name="+e+"] [name="+t+"]").next().hide()},1)}function tdate_start(t,e,n,a,i){$(t).wrap('<div class="tdate-group date">');$(t).after('<span class="btn btn-default tdate-group-addon"><i class="far fa-calendar"></i></span>');var r={format:e,todayBtn:"linked",language:n,calendarWeeks:false,autoclose:true,todayHighlight:true,orientation:"bottom auto"};i=Object.assign(r,JSON.parse(i));$(t).closest(".tdate-group").datepicker(i).on("changeDate",function(e){if($(t).attr("exitaction")){new Function($(t).attr("exitaction"))()}}).on("show",function(){$(".datepicker").on("click",function(e){e.stopPropagation()})});if(a!=="undefined"){$(t).closest(".tdate-group").width(a)}}function tdatetime_start(t,e,n,a,i){$(t).wrap('<div class="tdate-group tdatetimepicker input-append date">');$(t).after('<span class="add-on btn btn-default tdate-group-addon"><i class="far fa-clock icon-th"></i></span>');atributes={autoclose:true,todayBtn:true,todayHighlight:true,format:e,language:n};i=Object.assign(atributes,JSON.parse(i));$(t).closest(".tdate-group").datetimepicker(i).on("change.dp",function(e){if($(t).attr("exitaction")){new Function($(t).attr("exitaction"))()}}).on("show",function(){$(".datepicker").on("click",function(e){e.stopPropagation()})});if(a!=="undefined"){$(t).closest(".tdate-group").width(a)}}function tdbentry_start(e,t,n){$('input[name="'+e+'"]').autocomplete({serviceUrl:t,minChars:n})}function tentry_new_mask(t,n){$(document).ready(function(){n=n.replace(/9/g,"0");var e=$("#"+t).attr("maxlength")>0?$("#"+t).attr("maxlength"):250;if(n=="A!"){n="A".repeat(e)}else if(n=="S!"){n="S".repeat(e)}else if(n=="0!"){n="0".repeat(e)}$("#"+t).mask(n)})}function tentry_mask(e,t,n){var a,i,r,o,s,l;a=e.value;if(typeof a=="undefined"){return true}if($(e).attr("forceupper")=="1"){a=a.toUpperCase()}if($(e).attr("forcelower")=="1"){a=a.toLowerCase()}if(document.all){keyCode=t.keyCode}else if(document.layers){keyCode=t.which}else{keyCode=t.which}if(keyCode==8||t.keyCode==9||t.keyCode==13){return true}o="";var c=0;if(n.charAt(1)=="!"){l=e.value.length+1}else{l=n.length}for(i=0;i<l-1;i++){maskChar=n.charAt(i);valueChar=a.charAt(c);if(i<=a.length){if((maskChar=="-"||maskChar=="_"||maskChar=="."||maskChar=="/"||maskChar=="\\"||maskChar==":"||maskChar=="|"||maskChar=="("||maskChar==")"||maskChar=="["||maskChar=="]"||maskChar=="{"||maskChar=="}")&maskChar!==valueChar){o+=maskChar}else{o+=valueChar;c++}}}e.value=o;s=e.value.length;if(n.charAt(1)=="!"){maskChar=n.charAt(0)}else{maskChar=n.charAt(s)}switch(maskChar){case"A":case"a":return keyCode>47&&keyCode<58||keyCode>64&&keyCode<91||keyCode>96&&keyCode<123;break;case"S":case"s":return keyCode>64&&keyCode<91||keyCode>96&&keyCode<123;break;case"9":return keyCode>47&&keyCode<58;break}return true}function tentry_upper(e){if(typeof e.value!=="undefined"){e.value=e.value.toUpperCase()}}function tentry_lower(e){if(typeof e.value!=="undefined"){e.value=e.value.toLowerCase()}}function tentry_autocomplete(e,t,n){var a;var i='input[name="'+e+'"]';if($("#"+e).length>0){var i="#"+e}var r={lookup:t,onSelect:function(){var e=$(this).data("val");var t=$(this).val();$(this).data("val",t);$(i).removeAttr("onblur");if(e!==t){if($(i).attr("exitaction")){string_callback=$(i).attr("exitaction");Function(string_callback)()}}}};n=Object.assign(r,JSON.parse(n));$(i).autocomplete(n)}function tentry_autocomplete_by_name(e,t,n){objectId=$("[name="+e+"]").attr("id");tentry_autocomplete(objectId,t,n)}function tentry_numeric_mask(e,t,n,a){var i='input[name="'+e+'"]';if($("#"+e).length>0){var i="#"+e}$(i).maskMoney({prefix:"",suffix:"",affixesStay:true,thousands:a,decimal:n,precision:t,allowZero:false,allowNegative:true,formatOnBlur:false,reverse:false,selectAllOnFocus:false,allowEmpty:false})}function tentry_get_data_by_id(e){var t=$("#"+e).data("nmask");if(typeof t!=="undefined"){var n=t.substring(1,2);var a=t.substring(2,3);var i=$("#"+e).val();i=i.split(a).join("");i=i.split(n).join(".");return i}else{return $("#"+e).val()}}function tentry_exit_on_enter(t){$("#"+t).bind("keypress",function(e){if(e.keyCode==13){document.getElementById(t).blur()}})}function texpander_start(){$(".texpander-container").click(function(e){e.stopPropagation()})}function tfield_enable_field(e,t){try{$("form[name="+e+"] [name="+t+"]").attr("readonly",false);$("form[name="+e+"] [name="+t+"]").removeClass("tfield_disabled")}catch(e){console.log(e)}}function tfield_disable_field(e,t){try{$("form[name="+e+"] [name="+t+"]").attr("readonly",true);$("form[name="+e+"] [name="+t+"]").addClass("tfield_disabled")}catch(e){console.log(e)}}function tfield_clear_field(e,t){try{$("form[name="+e+"] [name="+t+"]").val("")}catch(e){console.log(e)}}function tfield_transfer_value(e,t,n){if($(e).attr("type")=="checkbox"){var a=$(e).attr("value");var i=$(e).closest(n).find(t).val();if($(e).is(":checked")){i=i+a+","}else{i=i.replace(a+",","")}$(e).closest(n).find(t).val(i)}else{var i=$(e).val();$(e).closest(n).find(t).val(i)}}function ttreeview_start(e,t){$(e).treeview({persist:"location",animated:"fast",collapsed:t})}function FileUploader(e,t,n,a,i,r,o,s){this.field_name=$("#"+e).attr("receiver");this.input_id=e;this.service_action=n;this.parent_container=$("#"+t);this.complete_action=a;this.error_action=i;this.file_handling=r;this.image_gallery=JSON.parse(o);this.popover=JSON.parse(s);this.obj_file=document.getElementById(this.input_id);var c=this;this.createStatusRow=function(){var e=c.parent_container.find("[widget=tfile]")[0];var t=$(e).css("width");var n=$("<div />",{class:"tfile_row_wrapper",style:"display:none"});var a=$("<div />",{class:"tfile_row_1"});var i=$("<div />",{class:"tfile_row_2"});var r=$("<div />",{class:"tfile_link_wrapper",style:"width: calc("+t+" - 25px)"});var o=$("<span />",{class:"tfile_del_icon fa fa-minus-circle gray",title:"Remover"});var s=$("<div />",{class:"progress-bar progress-bar-success",style:"width: 0%; height: 2px;"});var l=$("<input />",{type:"hidden",name:c.field_name});if(c.image_gallery.enabled=="1"){$(r).css("width","unset");$(n).css("border","1px solid gray");$(n).css("border-radius","3px");$(n).css("margin","2px")}c.file_row_wrapper=n;c.file_input_hidden=l;c.file_progress_bar=s;c.file_link_wrapper=r;c.parent_container.children(".tfile_row_wrapper").remove();c.parent_container.append(n);n.append(a);n.append(i);a.append(l,r,o);i.append(s);$(o).click(function(){var e=c.getData();n.hide();c.parent_container.children("i").attr({class:"",title:""});c.parent_container.find("[widget=tfile]").css("padding-left","5px");e.delFile=e.fileName;if(e.delFile==e.newFile){e=""}c.setData(e)});return n};this.showFile=function(e){if(typeof e=="undefined"){var e=this.getData()}var t=e.fileName;if(t){var n=c.file_row_wrapper;var a=n.find(".tfile_link_wrapper");n.find(".progress-bar").css("width","100%");if($.inArray(t.split(".").pop(),["png","jpg","jpeg","gif"])>-1){var i='<div class="popover" role="tooltip" style="z-index:100000;max-width:800px"><div class="arrow"></div><h3 class="popover-title popover-header"></h3><div class="popover-content popover-body"><div class="data-content"></div></div></div>';var r='<img style="max-width:460px" src="download.php?file={file_name}">';if(c.popover.content){r=atob(c.popover.content)}r=r.replace("{file_name}",t);if(c.image_gallery.enabled=="1"){var o=$("<a />",{href:"download.php?file="+t,target:"_blank"});var s=$("<img />",{src:"download.php?file="+t}).height(c.image_gallery.height).width(c.image_gallery.width);o.append(s);if(c.popover.enabled=="1"){o.popover({trigger:"hover",content:r,html:true,container:"body",template:i,title:c.popover.title||""})}}else{var o=$("<a />",{href:"download.php?file="+t,target:"_blank"});if(c.popover.enabled=="1"){o.popover({trigger:"hover",content:r,html:true,container:"body",template:i,title:c.popover.title||""})}}}else{var o=$("<a />",{href:"download.php?file="+t,target:"_blank"})}c.file_row_wrapper.show();if(c.image_gallery.enabled!="1"){o.append(t)}a.html(o)}};this.getData=function(){var e=decodeURIComponent(c.file_input_hidden.val());var t="";try{t=e?JSON.parse(e):{}}catch(e){t={}}return t};this.setData=function(e){if(e){$(c.file_input_hidden).val(encodeURIComponent(JSON.stringify(e)))}else{$(c.file_input_hidden).val("")}};this.supportAjaxUploadWithProgress=function(){return this.supportFileAPI()&&this.supportAjaxUploadProgressEvents()&&this.supportFormData()};this.supportFileAPI=function(){var e=document.createElement("INPUT");e.type="file";return"files"in e};this.supportAjaxUploadProgressEvents=function(){var e=new XMLHttpRequest;return!!(e&&"upload"in e&&"onprogress"in e.upload)};this.supportFormData=function(){return!!window.FormData};this.initFileUpload=function(){if(c.file_handling){}if(this.supportAjaxUploadWithProgress()){var e=new FormData;var t=c.obj_file.files[0];e.append("fileName",t);this.sendXHRequest(e,c.service_action)}};this.sendXHRequest=function(e,t){var n=new XMLHttpRequest;n.upload.addEventListener("loadstart",this.onLoadStart,false);n.upload.addEventListener("progress",this.onProgress,false);n.upload.addEventListener("load",this.onLoad,false);n.addEventListener("readystatechange",this.onReadyStateChange,false);n.open("POST",t,true);n.send(e)};this.onLoadStart=function(e){if(c.parent_container.children("i").length==0){c.parent_container.prepend($("<i>"))}if(c.file_handling){c.file_row_wrapper.show()}c.parent_container.find("[widget=tfile]").css("padding-left","20px");c.parent_container.children("i").attr({class:"fa fa-spinner fa-spin fa-fw blue file-response-icon",title:"..."})};this.onLoad=function(e){};this.onProgress=function(e){if(e.lengthComputable&&c.file_handling){var t=Math.round(e.loaded*100/e.total);c.file_progress_bar.css("width",t+"%").css("height",2);c.file_link_wrapper.html(t+"%")}};this.onReadyStateChange=function(t){var e=null;try{e=t.target.status}catch(e){return}if(e=="200"&&t.target.readyState=="4"&&t.target.responseText){try{var n=JSON.parse(t.target.responseText);if(n.type=="success"){if(c.file_handling){var a=c.getData();if(a.fileName){a.delFile=a.fileName}a.newFile="tmp/"+n.fileName;a.fileName="tmp/"+n.fileName;c.setData(a);c.showFile(a)}else{var i=$("#"+c.input_id).parent().children("input[type=hidden]");$(i).val(n.fileName)}c.showMessage("success","Sucesso");if(this.readyState==4&&typeof c.complete_action=="function"){c.complete_action()}}else{if(c.file_handling){c.file_row_wrapper.remove()}if(typeof c.error_action=="function"){c.error_action()}c.showMessage("error",n.msg)}}catch(e){if(typeof c.error_action=="function"){c.error_action()}if(c.file_handling){c.file_row_wrapper.remove()}if(typeof n=="undefined"){c.showMessage("error",t.target.responseText)}else{c.showMessage("error",e)}}}};this.showMessage=function(e,t){if(e=="success"){c.parent_container.find("[widget=tfile]").css("padding-left","20px");c.parent_container.children("i").attr({class:"far fa-check-circle green file-response-icon",title:t})}else if(e=="error"){c.parent_container.find("[widget=tfile]").css("padding-left","20px");c.parent_container.children("i").attr({class:"fa fa-exclamation-circle red file-response-icon",title:t})}}}function tfile_start(n,a,i,r,o,s,l,c){$(function(){var e=new FileUploader(n,a,i,r,o,s,l,c);$("#"+n).change(function(){e.initFileUpload()});if(s){var t=$("#"+n).parent().children("input[type=hidden]");e.createStatusRow();if($(t).val()){e.setData(JSON.parse(decodeURIComponent($(t).val())))}e.showFile();$(t).remove()}})}function tfile_enable_field(e,t){try{$("form[name="+e+"] [name=file_"+t+"]").removeAttr("disabled");$("form[name="+e+"] [name=file_"+t+"]").removeClass("tfield_disabled").addClass("tfield")}catch(e){console.log(e)}}function tfile_disable_field(e,t){try{$("form[name="+e+"] [name=file_"+t+"]").attr("disabled",true);$("form[name="+e+"] [name=file_"+t+"]").removeClass("tfield").addClass("tfield_disabled")}catch(e){console.log(e)}}function tfile_clear_field(e,t){try{$("form[name="+e+"] [name="+t+"]").val("");$("form[name="+e+"] [name=file_"+t+"]").val("")}catch(e){console.log(e)}}function tfile_update_download_link(e){if($("#view_"+e).length){value=$("[name="+e+"]").val();$("#view_"+e).attr("href","download.php?file=tmp/"+value);$("#view_"+e).html("tmp/"+value)}}function MultiFileUploader(e,t,n,a,i,r,o,s){this.field_name=$("#"+e).attr("receiver");this.obj_file=t;this.service_action=n;this.complete_action=i;this.file_handling=r;this.image_gallery=JSON.parse(o);this.popover=JSON.parse(s);this.parent_container=$("#"+a);var c=this;this.createStatusRow=function(){var e=c.parent_container.find("[widget=tmultifile]")[0];var t=$(e).css("width");var n=$("<div />",{class:"tfile_row_wrapper"});var a=$("<div />",{class:"tfile_row_1"});var i=$("<div />",{class:"tfile_row_2"});var r=$("<div />",{class:"tfile_link_wrapper",style:"width: calc("+t+" - 25px)"});var o=$("<span />",{class:"tfile_del_icon fa fa-minus-circle gray",title:"Remover"});var s=$("<div />",{class:"progress-bar progress-bar-success",style:"width: 0%; height: 2px;"});var l=$("<input />",{type:"hidden",name:c.field_name+"[]"});if(c.image_gallery.enabled=="1"){$(r).css("width","unset");$(n).css("border","1px solid gray");$(n).css("border-radius","3px");$(n).css("margin","2px");$(n).css("display","inline-block")}c.file_row_wrapper=n;c.file_input_hidden=l;c.file_progress_bar=s;c.file_link_wrapper=r;c.parent_container.append(n);n.append(a);n.append(i);a.append(l,r,o);i.append(s);$(o).click(function(){var e=c.getData();n.hide();c.parent_container.children("i").attr({class:"",title:""});c.parent_container.find("[widget=tmultifile]").css("padding-left","5px");e.delFile=e.fileName;if(e.delFile==e.newFile){e=""}c.setData(e)});return n};this.showFile=function(e){if(typeof e=="undefined"){var e=this.getData()}var t=e.fileName;if(t){var n=c.file_row_wrapper;var a=n.find(".tfile_link_wrapper");n.find(".progress-bar").css("width","100%");if($.inArray(t.split(".").pop(),["png","jpg","gif","jpeg"])>-1){var i='<div class="popover" role="tooltip" style="z-index:100000;max-width:800px"><div class="arrow"></div><h3 class="popover-title popover-header"></h3><div class="popover-content popover-body"><div class="data-content"></div></div></div>';var r='<img style="max-width:460px" src="download.php?file={file_name}">';if(c.popover.content){r=atob(c.popover.content)}r=r.replace("{file_name}",t);if(c.image_gallery.enabled=="1"){var o=$("<a />",{href:"download.php?file="+t,target:"_blank"});var s=$("<img />",{src:"download.php?file="+t}).height(c.image_gallery.height).width(c.image_gallery.width);o.append(s);if(c.popover.enabled=="1"){a.popover({trigger:"hover",content:r,html:true,container:"body",template:i,title:c.popover.title||""})}}else{var o=$("<a />",{href:"download.php?file="+t,target:"_blank"});if(c.popover.enabled=="1"){o.popover({trigger:"hover",content:r,html:true,container:"body",template:i,title:c.popover.title||""})}}}else{var o=$("<a />",{href:"download.php?file="+t,target:"_blank"})}if(c.image_gallery.enabled!="1"){o.append(t)}a.html(o)}};this.getData=function(){var e=decodeURIComponent(c.file_input_hidden.val());var t="";try{t=e?JSON.parse(e):{}}catch(e){t={}}return t};this.setData=function(e){if(e){$(c.file_input_hidden).val(encodeURIComponent(JSON.stringify(e)))}else{$(c.file_input_hidden).val("")}};this.supportAjaxUploadWithProgress=function(){return this.supportFileAPI()&&this.supportAjaxUploadProgressEvents()&&this.supportFormData()};this.supportFileAPI=function(){var e=document.createElement("INPUT");e.type="file";return"files"in e};this.supportAjaxUploadProgressEvents=function(){var e=new XMLHttpRequest;return!!(e&&"upload"in e&&"onprogress"in e.upload)};this.supportFormData=function(){return!!window.FormData};this.initFileUpload=function(){this.createStatusRow();if(this.supportAjaxUploadWithProgress()){var e=new FormData;var t=c.obj_file;e.append("fileName",t);this.sendXHRequest(e,c.service_action)}};this.sendXHRequest=function(e,t){var n=new XMLHttpRequest;n.upload.addEventListener("loadstart",this.onLoadStart,false);n.upload.addEventListener("progress",this.onProgress,false);n.upload.addEventListener("load",this.onLoad,false);n.addEventListener("readystatechange",this.onReadyStateChange,false);n.open("POST",t,true);n.send(e)};this.onLoadStart=function(e){if(c.parent_container.children("i").length==0){c.parent_container.prepend($("<i>"))}c.parent_container.find("[widget=tmultifile]").css("padding-left","20px");c.parent_container.children("i").attr({class:"fa fa-spinner fa-spin fa-fw blue file-response-icon",title:"..."})};this.onLoad=function(e){};this.onProgress=function(e){if(e.lengthComputable){var t=Math.round(e.loaded*100/e.total);c.file_progress_bar.css("width",t+"%").css("height",2);c.file_link_wrapper.html(t+"%")}};this.onReadyStateChange=function(t){var e=null;try{e=t.target.status}catch(e){return}if(e=="200"&&t.target.readyState=="4"&&t.target.responseText){try{var n=JSON.parse(t.target.responseText);if(n.type=="success"){if(c.file_handling){var a=c.getData();a.newFile="tmp/"+n.fileName;a.fileName="tmp/"+n.fileName;c.setData(a);c.showFile(a)}else{c.file_input_hidden.val(n.fileName);c.file_link_wrapper.html(n.fileName)}c.showMessage("success","Sucesso");if(this.readyState==4&&typeof c.complete_action=="function"){c.complete_action()}}else{c.file_row_wrapper.remove();c.showMessage("error",n.msg)}}catch(e){c.file_row_wrapper.remove();if(typeof n=="undefined"){c.showMessage("error",t.target.responseText)}else{c.showMessage("error",e)}}}};this.showMessage=function(e,t){if(e=="success"){c.parent_container.find("[widget=tmultifile]").css("padding-left","20px");c.parent_container.children("i").attr({class:"far fa-check-circle green file-response-icon",title:t})}else if(e=="error"){c.parent_container.find("[widget=tmultifile]").css("padding-left","20px");c.parent_container.children("i").attr({class:"fa fa-exclamation-circle red file-response-icon",title:t})}}}function tmultifile_start(a,i,r,o,s,l,c){$(function(){$("#"+a).change(function(){$.each($(this).prop("files"),function(e,t){var n=new MultiFileUploader(a,t,r,i,o,s,l,c);n.initFileUpload()})});if(s){$("#"+a).parent().children("input[type=hidden]").each(function(e,t){var n=new MultiFileUploader(a,null,r,i,o,s,l,c);n.createStatusRow();if($(t).val()){n.setData(JSON.parse(decodeURIComponent($(t).val())))}n.showFile();$(t).remove()})}})}function tmultifile_enable_field(e,t){try{$("form[name="+e+"] [name='file_"+t+"[]']").removeAttr("disabled");$("form[name="+e+"] [name='file_"+t+"[]']").removeClass("tfield_disabled").addClass("tfield")}catch(e){console.log(e)}}function tmultifile_disable_field(e,t){try{$("form[name="+e+"] [name='file_"+t+"[]']").attr("disabled",true);$("form[name="+e+"] [name='file_"+t+"[]']").removeClass("tfield").addClass("tfield_disabled")}catch(e){console.log(e)}}function tmultifile_clear_field(e,t){try{$("form[name="+e+"] [name='"+t+"[]']").val("");$("form[name="+e+"] [name='file_"+t+"[]']").val("")}catch(e){console.log(e)}}function thtmleditor_enable_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").next().find(".note-editable").attr("contenteditable",true)},1)}function thtmleditor_disable_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").next().find(".note-editable").attr("contenteditable",false)},1)}function thtmleditor_clear_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").code("")},1)}function thtmleditor_start(n,e,t,a,i){var r={fontSizes:["8","9","10","11","12","14","18","24","36","48","64","82","150"],width:e,height:t,lang:a,toolbar:[["undoredo",["undo","redo"]],["style",["style","bold","italic","underline","clear"]],["font",["fontname","fontsize","color"]],["para",["ul","ol","paragraph","height"]],["insert",["table","link","picture","hr"]],["view",["fullscreen","codeview","help"]]]};i=Object.assign(r,JSON.parse(i));if(typeof i.completion!=="undefined"){if(typeof summernote_wordlist=="undefined"){summernote_wordlist={}}summernote_wordlist[n]=i.completion;i.hint={match:/\b(\w{1,})$/,search:function(t,e){e($.grep(summernote_wordlist[n],function(e){return e.indexOf(t)===0}))}}}if(i.airMode==true){setTimeout(function(){$("#"+n).parent().find(".note-editable").height(t+"px").css("overflow","auto")},1)}$("#"+n).summernote(i);if(typeof $("#"+n).next(".note-editor")[0]!=="undefined"){var o=$("#"+n).next(".note-editor")[0];$(o).css("margin",$("#"+n).css("margin"))}}function thtml_editor_reload_completion(e,t){objectId=$("[name="+e+"]").attr("id");setTimeout(function(){summernote_wordlist[objectId]=t},1)}function tmenubar_start(){$(document).ready(function(){$(".dropdown-toggle").dropdown()})}function tmultisearch_start(e,t,n,a,i,r,o,s,l,c){var d={minimumInputLength:t,maximumSelectionLength:n,allowClear:s,placeholder:a,multiple:i,minimumResultsForSearch:l,id:function(e){return e.id+"::"+e.text},templateResult:function(e){if(/<[a-z][\s\S]*>/i.test(e.text)){return $("<span>"+e.text+"</span>")}else{return e.text}},templateSelection:function(e){if(/<[a-z][\s\S]*>/i.test(e.text)){return $("<span>"+e.text+"</span>")}else{return e.text}}};if(i!=="1"){delete d.maximumSelectionLength}$("#"+e).select2(d).on("select2:unselecting",function(){$(this).data("unselecting",true)}).on("select2:opening",function(e){if($(this).data("unselecting")){$(this).removeData("unselecting");e.preventDefault()}});if(typeof c!="undefined"){$("#"+e).on("change",function(e){c()})}if(parseInt(n)!==1){$("#"+e).parent().find(".select2-selection").height(o);$("#"+e).parent().find(".select2-selection").find(".select2-selection__rendered").height(o);$("#"+e).parent().find(".select2-selection").find(".select2-selection__rendered").css("overflow-y","auto")}}function tmultisearch_clear_field(e,t){try{$("form[name="+e+'] [name="'+t+'[]"]').val("").trigger("change");$("form[name="+e+'] [name="'+t+'"]').val("").trigger("change")}catch(e){console.log(e)}}function tmultisearch_enable_field(e,t){try{if($("form[name="+e+'] [name="'+t+'"]').length>0){$("form[name="+e+'] [name="'+t+'"]').next(".select2").find(".select2-disable").remove()}else{$("form[name="+e+'] [name="'+t+'[]"]').next(".select2").find(".select2-disable").remove()}}catch(e){console.log(e)}}function tmultisearch_disable_field(e,t){try{if($("form[name="+e+'] [name="'+t+'"]').length>0){$("form[name="+e+'] [name="'+t+'"]').next(".select2").prepend('<div class="select2-disable"></div>')}else{$("form[name="+e+'] [name="'+t+'[]"]').next(".select2").prepend('<div class="select2-disable"></div>')}}catch(e){console.log(e)}}$.fn.select2.amd.require(["select2/selection/search"],function(e){var t=e.prototype.searchRemoveChoice;e.prototype.searchRemoveChoice=function(){t.apply(this,arguments);this.$search.val("")}});$.fn.select2.amd.require(["select2/selection/single"],function(e){var n=e.prototype.update;e.prototype.update=function(e){n.apply(this,Array.prototype.slice.apply(arguments));var t=this.$selection.find(".select2-selection__rendered");t.removeAttr("title")}});$.fn.select2.amd.require(["select2/selection/multiple"],function(e){var a=e.prototype.update;e.prototype.update=function(e){a.apply(this,Array.prototype.slice.apply(arguments));var t=this.options.get("selectionTitleAttribute");if(t===false){var n=this.$selection.find(".select2-selection__rendered");n.find(".select2-selection__choice").removeAttr("title")}}});function tmultientry_start(e,t,n,a,i){var r={tags:true,maximumSelectionLength:t,width:n,height:a,tokenSeparators:[",",";"]};if(typeof i!="undefined"){$("#"+e).on("change",function(e){i()})}var o=$("#"+e).select2(r);$("#"+e).parent().find(".select2-selection").height(a);$("#"+e).parent().find(".select2-selection").find(".select2-selection__rendered").height(a);$("#"+e).parent().find(".select2-selection").find(".select2-selection__rendered").css("overflow-y","auto")}function tdbuniquesearch_set_value(e,n,i,r){setTimeout(function(){if(n.substr(0,1)=="#"){var a=$(n)}else{var a=$("[name="+n+"]")}var e=a.data("select2").options.options.hash;var t=a.data("select2").options.options.ajax.url+"&hash="+e+"&value="+i+"&onlyidsearch=1";$.ajax({url:t,dataType:"json"}).done(function(e){if(e.result.length>0){var t=e.result[0];var n=t.split("::");if(!a.find("option[value='"+n[0]+"']").length){a.append(new Option(n[1],n[0],true,true))}if(i==""){a.val("").trigger("change.select2")}else{var e=[];e.push(n[0]);a.val(e).trigger("change.select2")}if(typeof r=="function"){r()}}else{a.val("").trigger("change.select2")}}).fail(function(e,t,n){__adianti_error("Error",t+": "+"connection failed")})},1)}function tdbmultisearch_start(e,t,n,a,i,r,o,s,l,c){var d={minimumInputLength:t,maximumSelectionLength:n,allowClear:true,placeholder:a,multiple:i,hash:l,id:function(e){return e.id+"::"+e.text},templateResult:function(e){if(/<[a-z][\s\S]*>/i.test(e.text)){return $("<span>"+e.text+"</span>")}else{return e.text}},templateSelection:function(e){if(/<[a-z][\s\S]*>/i.test(e.text)){return $("<span>"+e.text+"</span>")}else{return e.text}},ajax:{url:r,dataType:"json",delay:250,data:function(e,t){return{value:e.term,hash:l}},processResults:function(e,t){var n=[];$(e.result).each(function(e){var t=this.split("::");n.push({id:t[0],text:t[1]})});return{results:n}}}};if(i!=="1"){delete d.maximumSelectionLength}$("#"+e).select2(d).on("select2:unselecting",function(){$(this).data("unselecting",true)}).on("select2:opening",function(e){if($(this).data("unselecting")){$(this).removeData("unselecting");e.preventDefault()}});if(typeof c!="undefined"){$("#"+e).on("change",function(e){c()})}if(parseInt(n)!==1){$("#"+e).parent().find(".select2-selection").height(s);$("#"+e).parent().find(".select2-selection").find(".select2-selection__rendered").height(s);$("#"+e).parent().find(".select2-selection").find(".select2-selection__rendered").css("overflow-y","auto")}}function tradiogroup_enable_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").attr("onclick",null);$("form[name="+e+"] [name="+t+"]").css("pointer-events","auto");$("form[name="+e+"] [name="+t+"]").parent().css("pointer-events","auto");$("form[name="+e+"] [name="+t+"]").parent().removeAttr("disabled");$("form[name="+e+"] [name="+t+"]").parent().css("color","")},1)}function tradiogroup_disable_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").attr("onclick","return false");$("form[name="+e+"] [name="+t+"]").css("pointer-events","none");$("form[name="+e+"] [name="+t+"]").parent().css("pointer-events","none");$("form[name="+e+"] [name="+t+"]").parent().attr("disabled","");$("form[name="+e+"] [name="+t+"]").parent().css("color","gray")},1)}function tradiogroup_clear_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").attr("checked",false)},1)}function tseekbutton_enable_field(e,t){try{$("form[name="+e+"] [name="+t+"]").attr("disabled",false);$("form[name="+e+"] [name="+t+"]").removeClass("tfield_disabled").addClass("tseekentry")}catch(e){console.log(e)}setTimeout(function(){$("form[name="+e+"] [for="+t+"]").show()},1)}function tseekbutton_disable_field(e,t){try{$("form[name="+e+"] [name="+t+"]").attr("disabled",true);$("form[name="+e+"] [name="+t+"]").addClass("tfield_disabled").removeClass("tseekentry")}catch(e){console.log(e)}setTimeout(function(){$("form[name="+e+"] [for="+t+"]").hide()},1)}function tselect_enable_field(e,t){try{$("form[name="+e+'] [name="'+t+'[]"]').attr("disabled",false);$("form[name="+e+'] [name="'+t+'[]"]').removeClass("tcombo_disabled").addClass("tcombo")}catch(e){console.log(e)}}function tselect_disable_field(e,t){try{$("form[name="+e+'] [name="'+t+'[]"]').attr("disabled",true);$("form[name="+e+'] [name="'+t+'[]"]').removeClass("tcombo").addClass("tcombo_disabled")}catch(e){console.log(e)}}function tselect_clear_field(e,t){try{$("form[name="+e+'] [name="'+t+'[]"]').val("")}catch(e){console.log(e)}}function tselect_add_option(e,t,n,a){$('<option value="'+n+'">'+a+"</option>").appendTo('form[name="'+e+'"] select[name="'+t+'[]"]')}function tselect_clear(e,t){$('form[name="'+e+'"] select[name="'+t+'[]"]').html("")}function tslider_start(e,t,n,a,i){var t=$(e).val();$(e).wrap('<div class="tslidercontainer">');$(e).before('<div class="label">'+t+"</div>");$(e).on("input",function(){$(e).parent().find(".label").html(this.value)})}function tslider_enable_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").css("pointer-events","auto");$("form[name="+e+"] [name="+t+"]").removeClass("tfield_disabled")},1)}function tslider_disable_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").css("pointer-events","none");$("form[name="+e+"] [name="+t+"]").addClass("tfield_disabled")},1)}function tsortlist_start(e,t,n,i){$(e).sortable({connectWith:t,tolerance:"pointer",start:function(e,t){t.item.data("index",t.item.index());t.item.data("parenta",this.id)},receive:function(e,t){if(i>0){if($(this).children().length>i){$(t.sender).sortable("cancel");return}}var n=t.sender;var a=$(this);targetListName=this.getAttribute("itemname");document.getElementById(t.item.attr("id")+"_input").name=targetListName+"[]";if(t.item.css("display")!==a.attr("itemdisplay")){t.item.css("display",a.attr("itemdisplay"));detached=t.item.detach();$(a).append(detached)}},deactivate:n}).disableSelection()}function tsortlist_enable_field(e,t){setTimeout(function(){$("form[name="+e+"] [itemname="+t+"]").sortable("enable")},1)}function tsortlist_disable_field(e,t){setTimeout(function(){$("form[name="+e+"] [itemname="+t+"]").sortable("disable")},1)}function tsortlist_clear_field(e,t){setTimeout(function(){$("form[name="+e+"] [itemname="+t+"]").empty()},1)}function tspinner_start(a,i){$(a).wrap('<div class="input-group spinner" data-trigger="spinner">');$(a).after('<div class="input-group-addon"> <a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a> <a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a> </div>');$(a).parent().spinner("changing",function(e,t,n){if($(a).attr("exitaction")){new Function($(a).attr("exitaction"))()}if(typeof i=="function"){i()}})}function tspinner_enable_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").parent().css("pointer-events","auto");$("form[name="+e+"] [name="+t+"]").removeClass("tfield_disabled");$("form[name="+e+"] [name="+t+"]").removeAttr("readonly")},1)}function tspinner_disable_field(e,t){setTimeout(function(){$("form[name="+e+"] [name="+t+"]").parent().css("pointer-events","none");$("form[name="+e+"] [name="+t+"]").addClass("tfield_disabled");$("form[name="+e+"] [name="+t+"]").attr("readonly",true)},1)}function tfullcalendar_start(e,t,n,a,i,r,o,s,l,c,d,f,u,p,m){var _=0;var h=0;var v={header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},hiddenDays:f,defaultDate:a,defaultView:n,allDaySlot:false,viewRender:function(e,t){setTimeout(function(){__adianti_process_popover()},100)},minTime:c,maxTime:d,slotLabelFormat:"HH:mm",lang:i,editable:t,eventLimit:true,events:r,eventDurationEditable:p,eventStartEditable:u,eventRender:function(e,t){t.find(".fc-title").html(e.title)},dayClick:function(e,t,n){if(o!==""&&_==0&&h==0){__adianti_load_page(o+"&date="+e.format()+"&view="+n.name)}},eventClick:function(e,t,n){if(s!==""&&_==0&&h==0){__adianti_load_page(s+"&id="+e.id+"&key="+e.id+"&view="+n.name)}},eventDragStart:function(e,t,n,a){_=1},eventDragStop:function(e,t,n,a){_=0},eventDrop:function(e,t,n,a){if(l!==""){__adianti_ajax_exec(l+"&id="+e.id+"&key="+e.id+"&start_time="+e.start.format()+"&end_time="+e.end.format())}},eventResizeStart:function(e,t,n,a){h=1},eventResizeStop:function(e,t,n,a){h=0},eventResize:function(e,t,n,a){if(l!==""){__adianti_ajax_exec(l+"&id="+e.id+"&key="+e.id+"&start_time="+e.start.format()+"&end_time="+e.end.format())}},eventAfterAllRender:function(){__adianti_process_popover()}};m=Object.assign(v,JSON.parse(m));$("#"+e).fullCalendar(m)}function ticonview_contextmenu_start(n){$("#"+n).contextmenu(function(e){$(".dropdown-iconview").hide();var t=$("#"+n).next("ul");t.css("left",ticonview_mouseX(e,$("#"+n)));t.css("top",ticonview_mouseY(e,$("#"+n)));t.show();e.preventDefault()});return false}function ticonview_bind_click(){$(document).bind("click",function(e){$(".dropdown-iconview").hide()})}function ticonview_mouseX(e,t){var n=0;if($(t).closest(".ui-dialog").length>0){n=$(t).closest(".ui-dialog").offset().left}if(e.pageX){return e.pageX-n}else if(e.clientX){return e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)-n}else{return null}}function ticonview_mouseY(e,t){var n=0;if($(t).closest(".ui-dialog").length>0){n=$(t).closest(".ui-dialog").offset().top+50}if(e.pageY){return e.pageY-n}else if(e.clientY){return e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)-n}else{return null}}function ticonview_move_start(e,o,t,n){$("#"+e+" li"+t).draggable({zIndex:1e5,cursor:"pointer",start:function(e,t){$(this).css("opacity",.5);$(this).addClass("iconview-drag")},stop:function(e,t){$(this).css("opacity",1)},revert:function(e,t){$(this).data("uiDraggable").originalPosition={top:0,left:0};return!e}});$("ul.ticonview li"+n).droppable({accept:".iconview-drag",drop:function(e,t){var n=$(t.draggable).data();var a=$(this).data();var i={};for(var r in n){if(n.hasOwnProperty(r)&&(typeof n[r]=="string"||typeof n[r]=="number")){i["source_"+r]=n[r]}}for(var r in a){if(a.hasOwnProperty(r)&&(typeof a[r]=="string"||typeof a[r]=="number")){i["target_"+r]=a[r]}}__adianti_load_page(o+"&"+$.param(i))},over:function(e,t){$(this).addClass("ui-over").addClass($(this).attr("id"))},out:function(e,t){$(this).removeClass("ui-over")}})}function kanban_start_board(e,r){$("#"+e).sortable({revert:200,placeholder:"kanban-stage-placeholder",forcePlaceholderSize:true,helper:function(e,t){return $(t).clone().addClass("kanban-dragging")},start:function(e,t){t.item.show().addClass("kanban-ghost")},stop:function(e,t){t.item.show().removeClass("kanban-ghost")},update:function(e,t){var n=$(t.item).attr("stage_id");var a=[];$(".kanban-stage").each(function(){a.push($(this).attr("stage_id"))});var i=a.join("&order[]=");__adianti_load_page(r+"&key="+n+"&id="+n+"&stage_id="+n+"&order[]="+i)},cursor:"move",tolerance:"pointer",cancel:".kanban-stage-actions, .kanban-item, .kanban-shortcuts"})}function kanban_start_item(e,l){$("."+e).sortable({revert:200,placeholder:"kanban-item-placeholder",forcePlaceholderSize:true,connectWith:".kanban-item-sortable",helper:function(e,t){return $(t).clone().addClass("kanban-dragging")},start:function(e,t){t.item.show().addClass("kanban-ghost")},stop:function(e,t){t.item.show().removeClass("kanban-ghost")},update:function(e,t){if(l&&this===t.item.parent()[0]){var n=$(t.item).attr("item_id");var a=$(this).attr("stage_id");var i=[];$("[stage_id="+a+"] .kanban-item").each(function(){i.push($(this).attr("item_id"))});var r="";var o=i.indexOf(r);if(o!==-1)i.splice(o,1);var s=i.join("&order[]=");__adianti_load_page(l+"&key="+n+"&id="+n+"&stage_id="+a+"&order[]="+s)}},cursor:"move",tolerance:"pointer",cancel:".kanban-item-content, .kanban-item-actions"})}function tchecklist_row_enable_check(e){$("table#"+e+" tbody tr").click(function(e){var t=$(this).find("[type=checkbox]");var n=$(t).prop("checked");$(t).prop("checked",!n);if(!n){$(this).addClass("selected")}else{$(this).removeClass("selected")}});$("table#"+e+" tbody tr input[type=checkbox]").click(function(e){var t=$(this).prop("checked");var n=$(this).closest("tr");if($(this).offset().left<0){$(this).prop("checked",!t);if(!t){$(n).addClass("selected")}else{$(n).removeClass("selected")}}else{if(t){$(n).addClass("selected")}else{$(n).removeClass("selected")}}e.stopPropagation()})}function tchecklist_select_all(a,e){$("table#"+e+" tbody tr td input[type=checkbox]").each(function(e,t){var n=t.closest("tr");if(!a.checked&&t.checked){$(t).prop("checked",false);$(n).removeClass("selected")}else if(a.checked&&!t.checked){$(t).prop("checked",true);$(n).addClass("selected")}})}
